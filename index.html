<meta charset="utf-8">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://d3js.org/d3.v4.js"></script>
<title>US Unemployment Visualizations</title>
</head>
<style>
  html {
    height: 100%;
  }
  body {
    font: 12px Arial;
  }
  #unemploymentCharts { 
    float:left;
    width: 60%;
    height: 95%;
    margin: 12px;
    padding: 10px;
    border-style: solid;
    border-color: #AAA;
    overflow-y: scroll;
  }
  #options { 
    float:right;
    width: 35%;
    height: 95%;
    margin: 12px;
    padding: 10px;
  }
</style>

<body>
  <!-- Where the unemployment visualization go -->
  <div id="unemploymentCharts">
  </div>
  <!-- All the options for the visualization (states, years, etc.) -->
  <div id="options">
    <h1>US Unemployment Visualization</h1>
    <p>Click to delete.</p>
  </div>
  <script type="text/javascript">
    //Width and height
    var w = $("#unemploymentCharts").width() * 0.95;
    var h = 100;
    var barPadding = 1;

    var dataset1 = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
                    11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];
    var dataset2 = [20, 10, 13,  2, 21, 25, 22, 18, 15, 13,
                    11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];
    
    var chartArray = [dataset1, dataset1, dataset1, dataset1, dataset1, dataset1, dataset1, dataset1, dataset1, dataset1, dataset1];
    
    d3.select("#unemploymentCharts").selectAll("svg")
      .data(chartArray)
      .enter()
      .append("svg")
      .style("display", "block")
      .attr("width", w)
      .attr("height", h)
      .style("margin-top", 2);

    //Create SVG element
    var svg1 = d3.select("#unemploymentCharts")
                .append("svg")
                .style("display", "block")
                .attr("width", w)
                .attr("height", h);

    var svg2 = d3.select("#unemploymentCharts")
                .append("svg")
                .style("display", "block")
                .attr("width", w)
                .attr("height", h)
                .style("margin-top", 2);

    svg1.selectAll("rect")
       .data(dataset1)
       .enter()
       .append("rect")
       .attr("x", function(d, i) {
            return i * (w / dataset1.length);
       })
       .attr("y", function(d) {
            return h - (d * 4);
       })
       .attr("width", w / dataset1.length - barPadding)
       .attr("height", function(d) {
            return d * 4;
       })
       .attr("fill", function(d) {
            return "rgb(0, 0, " + (d * 10) + ")";
       });

    svg1.selectAll("text")
       .data(dataset1)
       .enter()
       .append("text")
       .text(function(d) {
            return d;
       })
       .attr("text-anchor", "middle")
       .attr("x", function(d, i) {
            return i * (w / dataset1.length) + (w / dataset1.length - barPadding) / 2;
       })
       .attr("y", function(d) {
            return h - (d * 4) + 14;
       })
       .attr("font-family", "sans-serif")
       .attr("font-size", "11px")
       .attr("fill", "white");

    svg2.selectAll("rect")
       .data(dataset2)
       .enter()
       .append("rect")
       .attr("x", function(d, i) {
            return i * (w / dataset2.length);
       })
       .attr("y", function(d) {
            return h - (d * 4);
       })
       .attr("width", w / dataset2.length - barPadding)
       .attr("height", function(d) {
            return d * 4;
       })
       .attr("fill", function(d) {
            return "rgb(0, 0, " + (d * 10) + ")";
       });

    svg2.selectAll("text")
       .data(dataset2)
       .enter()
       .append("text")
       .text(function(d) {
            return d;
       })
       .attr("text-anchor", "middle")
       .attr("x", function(d, i) {
            return i * (w / dataset2.length) + (w / dataset2.length - barPadding) / 2;
       })
       .attr("y", function(d) {
            return h - (d * 4) + 14;
       })
       .attr("font-family", "sans-serif")
       .attr("font-size", "11px")
       .attr("fill", "white");

    d3.select("p")
        .on("click", function() {
            svg1.transition().duration(1500)
            .attr("height", 0)
            .remove();
        });



</script>
</body>